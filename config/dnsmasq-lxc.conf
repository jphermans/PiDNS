# PiDNS dnsmasq configuration for LXC Containers
# Optimized for containerized environments like Proxmox LXC

# Interface configuration - more flexible for different LXC setups
# Try to detect available interface
listen-address=127.0.0.1
# Uncomment the appropriate interface for your setup
# interface=eth0
# interface=venet0

# DHCP server configuration (disabled by default in LXC)
# Uncomment if you have proper network configuration and privileges
# dhcp-range=192.168.1.100,192.168.1.200,255.255.255.0,24h
# dhcp-option=option:router,192.168.1.1
# dhcp-option=option:dns-server,192.168.1.1
# dhcp-authoritative

# DNS configuration
domain-needed
bogus-priv
no-resolv
server=8.8.8.8
server=8.8.4.4
server=1.1.1.1

# Lease file location
dhcp-leasefile=/var/lib/misc/dnsmasq.leases

# Logging (minimal to avoid issues)
# log-queries
# log-dhcp

# Performance optimizations for container environment
cache-size=500
dns-forward-max=500

# Security settings that work in containers
# no-ping  # Commented out as it may cause issues in some LXC setups

# Local domain
local=/lxc.local/
domain=lxc.local

# Additional LXC-specific settings
bind-interfaces
except-interface=lo

# User and group to run as (helps with permission issues)
user=dnsmasq
group=dnsmasq
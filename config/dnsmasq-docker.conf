# PiDNS dnsmasq configuration for Docker
# Optimized for containerized environment

# Interface configuration
# Listen on all interfaces in Docker
interface=eth0

# DHCP server configuration
dhcp-range=192.168.100.100,192.168.100.200,255.255.255.0,24h
dhcp-option=option:router,192.168.100.1
dhcp-option=option:dns-server,192.168.100.1
dhcp-authoritative

# DNS configuration
domain-needed
bogus-priv
no-resolv
server=8.8.8.8
server=8.8.4.4
server=1.1.1.1

# Lease file location
dhcp-leasefile=/var/lib/misc/dnsmasq.leases

# Logging (minimal for resource constraints)
log-queries
log-dhcp

# Performance optimizations for container environment
cache-size=300
dns-forward-max=300

# Security
no-ping
dhcp-name-match=set:hostname-ignore,wpad
dhcp-ignore-names=tag:hostname-ignore

# Local domain
local=/docker.local/
domain=docker.local

# Blocklist configuration (for ad-blocker integration)
conf-file=/etc/dnsmasq.d/blocklist.conf